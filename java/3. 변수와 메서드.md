# 3. 변수와 메서드

## 3.1 선언위치에 따른 변수의 종류

변수의 선언 위치가 변수의 종류와 범위(scope)를 결정한다.

```java
class Variables {
  int number;	 							// 인스턴스변수
  String kind;       
  
  static int width = 100;		// 클래스변수(static변수, 공유변수)
  static int height = 250;
  
  void method() {
    int lv = 0;							// 지역변수
  }
}
```

- **인스턴스 변수(instance variable)**
  - 각 인스턴스의 개별적인 저장 공간으로 인스턴스마다 다른 값을 저장할 수 있다.
  - 인스턴스 생성 후, `참조변수.인스턴스변수명` 으로 접근한다.
  - 인스턴스를 생성할 때 생성되고, 참조변수가 없을 때 가비지컬렉터에 의해 자동 제거된다.
- **클래스 변수(class variable)**
  - 같은 클래스의 모든 인스턴스들이 공유하는 변수
  - 인스턴스 생성 없이 `클래스이름.클래스변수명` 으로 접근한다.
  - 클래스가 로딩될 때 생성되고 프로그램이 종료될 때 소멸한다.

- **지역 변수 (local variable)**

  - 메서드 내에서 선언되며, 메서드의 종료와 함께 소멸된다.
  - 조건문과 반복문의 블럭 {} 내에 선언된 지역변수는 블럭을 벗어나면 소멸된다.

  

## 3.2 클래스 변수와 인스턴스 변수

인스턴스 변수는 인스턴스가 생성될 때 마다 생성되므로 인스턴스마다 각기 다른 값을 유지할 수 있지만, 클래스 변수는 모든 인스턴스가 하나의 저장 공간을 공유하므로 항상 공통된 값을 갖는다.

```java
// 1. CardTest 클래스의 main 메서드가 호출된다.(Method Area)
class CardTest{
  public static viod main(String args[]) {
    // 2. Card 클래스의 인스턴스를 생성하기 위해 Card 클래스가 메모리에 로드된다. [[Method Area]] 
    // 이 때, Card 클래스의 클래스변수 width, height 이 메모리에 생성되고 각각 100, 250으로 초기화된다.
    
    // 3. Card 인스턴스가 생성되고, 멤버변수인 kind와 number가 기본값인 null과 0으로 각각 초기화된다.[[Heap]]
    // 4. 생성된 인스턴스 주소가 참조변수 c1에 저장된다. [[Call Stack]]
    Card c1 = new Card();
    c1.kind = "Heart";
    c1.number = 7;
    
    Card c2 = new Card();
    c2.kind = "Spade";
    c2.number = 4;
    
    // 5. 모든 인스턴스는 자신을 생성한 클래스의 주소를 갖고 있으므로, 참조변수를 사용해서도 클래스변수에 접근가능하다.
    c1.width = 50;
    c1.height = 80;
  }
}

class Card {
  String kind;
  int number;
  
  static int width = 100;
  static int height = 250;
}
```



## 3.3 메서드

- 메서드란?
  - 작업을 수행하기 위한 동작
  - "클래스에 있는 함수" - 자바에서 모든 함수는 클래스 안에 있으므로 자바의 모든 함수는 메서드이다.
- 메서드의 장점과 작성시 주의점
  - 반복되는 코드를 줄일 수 있다.
  - 하나의 메서드는 하나의 기능을 한다.
- 메서드를 정의하는 방법 - 클래스 영역에만 정의할 수 있다.

```java
// int 는 리턴 타입(리턴값이 없으면 void)
// sum은 메소드 이름
// () 안은 파라미터 들거가고, {} 안에는 수행할 기능이 들어간다.

int sum(int x, int y)  // 선언부
{											 // 구현부
  return x + y;
}
```



## 3.4 return 문

- 메서드가 정상적으로 종료되는 경우
  - 메서드의 블럭 {}의 끝에 도달했을 때
  - 메서드의 블럭 {}을 수행하는 도중 return 문을 만났을 때
- return문
  - 현재 실행 중인 메서드를 종료하고 호출한 메서드로 되돌아간다.
  - 1. 반환 값이 없는 경우 => return; 
    2. 반환 값이 있는 경우 => return 반환값;

- 주의사항

  - 반환값이 있는 메서드는 모든 경우에 return 문이 있어야 한다. (`if` - `else` )
  - return 문의 개수는 최소화하는 것이 좋다. (result 변수 등 활용)

  

## 3.5 메서드 호출

- `참조변수.메서드이름();`  - 메서드에 선언된 매개변수가 없는 경우
- `참조변수.메서드이름(값1, 값2, ...);` - 메서드에 선언된 매개변수가 있는 경우



## 3.6 JVM의 메모리 구조 

### 구조

<img src="3. 변수와 메서드.assets/image-20211228223407819.png" alt="image-20211228223407819" style="zoom:25%;" />



- 메서드 영역(Method Area) : 클래스 정보와 클래스 변수가 저장되는 곳
- 호출 스택(Call Stack) : 메서드의 작업 공간. 메서드가 호출되면 필요한 메모리 공간을 할당받고 메서드가 종료되면 사용하던 메모리를 반환한다.
- 힙(Heap) : 인스턴스가 생성되는 공간. `new` 연산자에 의해 생성되는 배열과 객체는 모두 여기에 생성된다.




### 호출스택

- 호출스택의 특징
  - 메서드가 호출되면 수행에 필요한 메모리를 스택에 할당받는다. 
  - 메서드가 수행을 마치면 사용했던 메모리를 반환한다.
  - 호출스택 제일 위에 있는 메서드가 현재 실행중인 메서드이다.
  - 아래에 있는 메서드가 바로 위의 메서드를 호출한 메서드다.

```java
class CallStackTest {
  public static void main(String[] args) {
    firstMethod();
  }
  static void firstMethod() {
    secondMethod();
  }
  static void SecondMethod() {
    System.out.println("secondMethod()");
  }
}
```

<img src="3. 변수와 메서드.assets/image-20211228223929629.png" alt="image-20211228223929629" style="zoom:25%;" />



## 3.7 기본형 매개변수와 참조형 매개변수

## 3.8 재귀 호출

## 3.9 클래스 메서드와 인스턴스 메서드

## 3.10 멤버간의 참조화 호출



