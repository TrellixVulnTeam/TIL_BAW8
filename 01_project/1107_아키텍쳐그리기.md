# 아키텍쳐 그리기



![image-20220107094746703](1107_아키텍쳐그리기.assets/image-20220107094746703.png)



# 시퀀스 라는 것

MSA 구조로 설계하면 서버가 분산된다.

퍼블릭 존의 서버, 프라이빗 존의 서버 등 서버 간 디펜덴시가 생긴다.

내가 만든 API는 어떤 플로우로 흘러갈 것인가?

기능을 추가할거면 어떤 서버에 추가할 것이며 어떤 플로우로 흘러갈것인가?

공통 기준을 아키텍쳐 문서로 제시한다.



![](1107_아키텍쳐그리기.assets/image-20220107094906533.png)

# 구현 방법이란?

비기능적 요인을 어떻게 해소할 것인가

리스크를 어떻게 회피할 것인가





# 시퀀스 다이어그램 제작 -> 포트폴리오 필수 기본

기획 상에서 무엇에 중점을 두는지에 따라 시퀀스 다이어그램이 달라진다.



![image-20220107095115069](1107_아키텍쳐그리기.assets/image-20220107095115069.png)



# 중점 : 보안? 트래픽? 에러처리?

# MSA 스타일로 그려야

![image-20220107095326817](1107_아키텍쳐그리기.assets/image-20220107095326817.png)



![image-20220107095348231](1107_아키텍쳐그리기.assets/image-20220107095348231.png)

![image-20220107095357369](1107_아키텍쳐그리기.assets/image-20220107095357369.png)

![image-20220107095407939](1107_아키텍쳐그리기.assets/image-20220107095407939.png)

![image-20220107095433395](1107_아키텍쳐그리기.assets/image-20220107095433395.png)

언젠가 필수적으로 해야하는 것이다.

토이를 넘어서야 한다.

L4를 사용해 로드밸런싱을 만든다.

캐시를 사용해 response time을 줄인다. 



# 스파이크성 트래픽 처리 : L4 통한 로드밸런싱 , Cache, DB sharding

# 보안 : Public Zone(LTE), Private Zone(사내망)

![image-20220107095539359](1107_아키텍쳐그리기.assets/image-20220107095539359.png)

![image-20220107095631278](1107_아키텍쳐그리기.assets/image-20220107095631278.png)

# LIVE 유지보수 를 위한 아키텍쳐



# HA

High Availability 구성

로드밸런서를 두고 톰캣을 여러개

지속적으로 , 높은 가용성

지속적으로 구동되는 시스템



# 로드밸런서

- L4 switch (hardware)
- L7 (Nginx, HAProxy)



# 서버가 계속 많아지면..

서버 추가구입, 배포방식 변경(Jenkins, Ansible 등)

